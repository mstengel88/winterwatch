import{c as u,r,j as e,a4 as V,a5 as _,b as D,A as H,a6 as q,a7 as $,C as g,Q as y,R as v,a8 as B,$ as P,g as C,o as h,I as m,k as b,L as k,s as S,V as i}from"./index-CnGaZqSN.js";const E=u("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const Q=u("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const G=u("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const J=u("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var K="Separator",L="horizontal",W=["horizontal","vertical"],A=r.forwardRef((s,t)=>{const{decorative:c,orientation:o=L,...n}=s,l=X(o)?o:L,p=c?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(V.div,{"data-orientation":l,...p,...n,ref:t})});A.displayName=K;function X(s){return W.includes(s)}var F=A;const I=r.forwardRef(({className:s,orientation:t="horizontal",decorative:c=!0,...o},n)=>e.jsx(F,{ref:n,decorative:c,orientation:t,className:_("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...o}));I.displayName=F.displayName;function ee(){const{profile:s,user:t,refreshProfile:c}=D(),[o,n]=r.useState(!1),[l,x]=r.useState(!1),[p,M]=r.useState(s?.full_name||""),[f,O]=r.useState(s?.phone||""),[Y,U]=r.useState(""),[d,j]=r.useState(""),[w,N]=r.useState(""),z=s?.full_name?.split(" ").map(a=>a[0]).join("").slice(0,2).toUpperCase()||"U",R=async()=>{if(t){n(!0);try{const{error:a}=await S.from("profiles").update({full_name:p,phone:f,updated_at:new Date().toISOString()}).eq("id",t.id);if(a)throw a;await c(),i.success("Profile updated successfully")}catch(a){console.error("Error updating profile:",a),i.error(a.message||"Failed to update profile")}finally{n(!1)}}},T=async()=>{if(d!==w){i.error("New passwords do not match");return}if(d.length<6){i.error("Password must be at least 6 characters");return}x(!0);try{const{error:a}=await S.auth.updateUser({password:d});if(a)throw a;U(""),j(""),N(""),i.success("Password changed successfully")}catch(a){console.error("Error changing password:",a),i.error(a.message||"Failed to change password")}finally{x(!1)}};return e.jsx(H,{children:e.jsxs("div",{className:"container max-w-2xl py-8 px-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(q,{className:"h-16 w-16",children:e.jsx($,{className:"bg-primary/20 text-primary text-xl",children:z})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Profile Settings"}),e.jsx("p",{className:"text-muted-foreground",children:s?.email})]})]}),e.jsxs(g,{className:"mb-6",children:[e.jsxs(y,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Personal Information"]}),e.jsx(P,{children:"Update your personal details"})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"fullName",children:"Full Name"}),e.jsx(m,{id:"fullName",value:p,onChange:a=>M(a.target.value),placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Email"]}),e.jsx(m,{id:"email",value:s?.email||"",disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Phone Number"]}),e.jsx(m,{id:"phone",value:f,onChange:a=>O(a.target.value),placeholder:"Enter your phone number"})]}),e.jsxs(b,{onClick:R,disabled:o,children:[o?e.jsx(k,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(J,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}),e.jsx(I,{className:"my-6"}),e.jsxs(g,{children:[e.jsxs(y,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Change Password"]}),e.jsx(P,{children:"Update your password to keep your account secure"})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"newPassword",children:"New Password"}),e.jsx(m,{id:"newPassword",type:"password",value:d,onChange:a=>j(a.target.value),placeholder:"Enter new password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(m,{id:"confirmPassword",type:"password",value:w,onChange:a=>N(a.target.value),placeholder:"Confirm new password"})]}),e.jsxs(b,{onClick:T,disabled:l||!d||!w,variant:"outline",children:[l?e.jsx(k,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(E,{className:"h-4 w-4 mr-2"}),"Change Password"]})]})]})]})})}export{ee as default};
