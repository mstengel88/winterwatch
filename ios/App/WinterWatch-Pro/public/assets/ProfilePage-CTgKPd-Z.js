import{d as u,r,j as e,P as V,h as D,u as H,C as y,m as v,n as P,o as C,b,c as m,I as h,B as S,L as k,s as E,f as i}from"./index-BTTndiCa.js";import{A as q,a as B,b as $}from"./AppLayout-CdmLHGoC.js";import{U as G}from"./user-MPZ2r4HK.js";import"./index-C_FqIwIg.js";import"./Combination-BI3QGdrN.js";import"./truck-GV-QDD0s.js";import"./shovel-CsAXD17G.js";import"./log-out-D3n32clD.js";import"./clock-91DdfKYf.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=u("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=u("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=u("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=u("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var W="Separator",A="horizontal",X=["horizontal","vertical"],F=r.forwardRef((a,t)=>{const{decorative:c,orientation:o=A,...n}=a,l=Y(o)?o:A,p=c?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(V.div,{"data-orientation":l,...p,...n,ref:t})});F.displayName=W;function Y(a){return X.includes(a)}var I=F;const U=r.forwardRef(({className:a,orientation:t="horizontal",decorative:c=!0,...o},n)=>e.jsx(I,{ref:n,decorative:c,orientation:t,className:D("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...o}));U.displayName=I.displayName;function ce(){var g;const{profile:a,user:t,refreshProfile:c}=H(),[o,n]=r.useState(!1),[l,x]=r.useState(!1),[p,M]=r.useState((a==null?void 0:a.full_name)||""),[f,O]=r.useState((a==null?void 0:a.phone)||""),[Z,z]=r.useState(""),[d,j]=r.useState(""),[w,N]=r.useState(""),R=((g=a==null?void 0:a.full_name)==null?void 0:g.split(" ").map(s=>s[0]).join("").slice(0,2).toUpperCase())||"U",T=async()=>{if(t){n(!0);try{const{error:s}=await E.from("profiles").update({full_name:p,phone:f,updated_at:new Date().toISOString()}).eq("id",t.id);if(s)throw s;await c(),i.success("Profile updated successfully")}catch(s){console.error("Error updating profile:",s),i.error(s.message||"Failed to update profile")}finally{n(!1)}}},_=async()=>{if(d!==w){i.error("New passwords do not match");return}if(d.length<6){i.error("Password must be at least 6 characters");return}x(!0);try{const{error:s}=await E.auth.updateUser({password:d});if(s)throw s;z(""),j(""),N(""),i.success("Password changed successfully")}catch(s){console.error("Error changing password:",s),i.error(s.message||"Failed to change password")}finally{x(!1)}};return e.jsx(q,{children:e.jsxs("div",{className:"container max-w-2xl py-8 px-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(B,{className:"h-16 w-16",children:e.jsx($,{className:"bg-primary/20 text-primary text-xl",children:R})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Profile Settings"}),e.jsx("p",{className:"text-muted-foreground",children:a==null?void 0:a.email})]})]}),e.jsxs(y,{className:"mb-6",children:[e.jsxs(v,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5"}),"Personal Information"]}),e.jsx(C,{children:"Update your personal details"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"fullName",children:"Full Name"}),e.jsx(h,{id:"fullName",value:p,onChange:s=>M(s.target.value),placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Email"]}),e.jsx(h,{id:"email",value:(a==null?void 0:a.email)||"",disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Phone Number"]}),e.jsx(h,{id:"phone",value:f,onChange:s=>O(s.target.value),placeholder:"Enter your phone number"})]}),e.jsxs(S,{onClick:T,disabled:o,children:[o?e.jsx(k,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}),e.jsx(U,{className:"my-6"}),e.jsxs(y,{children:[e.jsxs(v,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"Change Password"]}),e.jsx(C,{children:"Update your password to keep your account secure"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"newPassword",children:"New Password"}),e.jsx(h,{id:"newPassword",type:"password",value:d,onChange:s=>j(s.target.value),placeholder:"Enter new password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(h,{id:"confirmPassword",type:"password",value:w,onChange:s=>N(s.target.value),placeholder:"Confirm new password"})]}),e.jsxs(S,{onClick:_,disabled:l||!d||!w,variant:"outline",children:[l?e.jsx(k,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(L,{className:"h-4 w-4 mr-2"}),"Change Password"]})]})]})]})})}export{ce as default};
